<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Classements Smash Betting - Hall of Fame</title>
    <style>
        :root { --smash-yellow: #FFD700; --blb-blue: #2D3271; --bg-dark: #111; }
        body { font-family: 'Arial Black', sans-serif; background-color: var(--bg-dark); color: white; text-align: center; text-transform: uppercase; }
        h1 { font-size: 3.5em; color: var(--smash-yellow); -webkit-text-stroke: 2px black; text-shadow: 4px 4px 0px #000; }
        .classement-container { display: flex; justify-content: center; gap: 40px; padding: 20px; }
        .classement-box { background: #222; padding: 25px; border: 5px solid #444; box-shadow: 12px 12px 0px #000; flex: 1; }
        h2 { background: linear-gradient(90deg, var(--blb-blue), transparent); padding: 10px; border-left: 8px solid var(--smash-yellow); }
        table { width: 100%; border-spacing: 0 8px; }
        th { color: var(--smash-yellow); border-bottom: 3px solid var(--smash-yellow); padding: 10px; }
        td { background: #333; padding: 15px; border-top: 2px solid #555; }
        .rank-1 td { background: linear-gradient(90deg, #FFD700, #BF953F) !important; color: black; }
    </style>
</head>
<body>
    <h1>Classements Smash Betting</h1>
    <div class="classement-container">
        <div class="classement-box" id="points-ranking-box">
            <h2>üèÜ Nombre de pr√©dictions remport√©es</h2>
            <table id="classement-points">
                <thead><tr><th>#</th><th>Utilisateur</th><th style="text-align:right">Points</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>
        <div class="classement-box" id="bonus-ranking-box">
            <h2>‚ú® Nombre de bonus utilis√©s</h2>
            <table id="classement-bonus">
                <thead><tr><th>#</th><th>Utilisateur</th><th>Total</th><th>LU</th><th>LD</th><th>CP</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
    <script>
        const apiBaseUrl = window.location.origin;
        function applyRank(row, rank) { if (rank <= 3) row.className = 'rank-' + rank; }
        function refresh() {
            fetch(`${apiBaseUrl}/api/classement/points`).then(r => r.json()).then(data => {
                const body = document.getElementById('classement-points').querySelector('tbody');
                body.innerHTML = '';
                data.forEach((item, i) => {
                    const row = body.insertRow(); applyRank(row, i+1);
                    row.insertCell().textContent = i+1;
                    row.insertCell().textContent = item.username;
                    row.insertCell().textContent = item.totalPoints;
                });
            });
            fetch(`${apiBaseUrl}/api/classement/bonus`).then(r => r.json()).then(data => {
                const body = document.getElementById('classement-bonus').querySelector('tbody');
                body.innerHTML = '';
                data.forEach((item, i) => {
                    const row = body.insertRow(); applyRank(row, i+1);
                    row.insertCell().textContent = i+1;
                    row.insertCell().textContent = item.username;
                    row.insertCell().textContent = item.bonusUsedCount;
                    row.insertCell().textContent = item.luCount || 0;
                    row.insertCell().textContent = item.ldCount || 0;
                    row.insertCell().textContent = item.cpCount || 0;
                });
            });
        }
        document.addEventListener('DOMContentLoaded', refresh);
        setInterval(refresh, 30000);
    </script>
</body>
</html>